<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Groupes de TD du 15/11">

<title>Eléments de correction pour le TD1 – Méthodes d’analyse factorielle</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Méthodes d’analyse factorielle</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/MarieEtienne/MAF.git"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-references-" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">References</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-references-">    
        <li>
    <a class="dropdown-item" href="./references_maf.html">
 <span class="dropdown-text">Cours</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./references_linear.html">
 <span class="dropdown-text">Algèbre linéaire</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-cours" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Cours</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-cours">    
        <li>
    <a class="dropdown-item" href="./01_intro.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./01_acp.html">
 <span class="dropdown-text">Analyse en Composantes Principales</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./01_afm.html">
 <span class="dropdown-text">Analyse Factorielle Multiple</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./01_afd.html">
 <span class="dropdown-text">Analyse Factorielle Discrimante</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tp" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">TP</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tp">    
        <li>
    <a class="dropdown-item" href="./TP1.html">
 <span class="dropdown-text">Labs1 - Analyse en composante Principale</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tp1_example.html">
 <span class="dropdown-text">Eléments de correction pour le TD1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./TP2.html">
 <span class="dropdown-text">Labs2 - Analyse en composante Principale et au-delà</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#présentation-de-quarto" id="toc-présentation-de-quarto" class="nav-link active" data-scroll-target="#présentation-de-quarto">Présentation de Quarto</a></li>
  <li><a href="#présentation-du-contexte" id="toc-présentation-du-contexte" class="nav-link" data-scroll-target="#présentation-du-contexte">Présentation du contexte</a>
  <ul class="collapse">
  <li><a href="#description-des-données" id="toc-description-des-données" class="nav-link" data-scroll-target="#description-des-données">Description des données</a>
  <ul class="collapse">
  <li><a href="#chargement-des-packages" id="toc-chargement-des-packages" class="nav-link" data-scroll-target="#chargement-des-packages">Chargement des packages</a></li>
  <li><a href="#importation-des-données" id="toc-importation-des-données" class="nav-link" data-scroll-target="#importation-des-données">Importation des données</a></li>
  <li><a href="#description-des-données-1" id="toc-description-des-données-1" class="nav-link" data-scroll-target="#description-des-données-1">Description des données</a></li>
  <li><a href="#représentation" id="toc-représentation" class="nav-link" data-scroll-target="#représentation">Représentation</a></li>
  </ul></li>
  <li><a href="#identifier-une-typologie-de-sol" id="toc-identifier-une-typologie-de-sol" class="nav-link" data-scroll-target="#identifier-une-typologie-de-sol">Identifier une typologie de sol</a>
  <ul class="collapse">
  <li><a href="#poids-des-individus" id="toc-poids-des-individus" class="nav-link" data-scroll-target="#poids-des-individus">Poids des individus</a></li>
  <li><a href="#distance-à-utiliser-entre-les-individus" id="toc-distance-à-utiliser-entre-les-individus" class="nav-link" data-scroll-target="#distance-à-utiliser-entre-les-individus">Distance à utiliser entre les individus</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#visualiser-la-profondeur-sur-les-différents-plans" id="toc-visualiser-la-profondeur-sur-les-différents-plans" class="nav-link" data-scroll-target="#visualiser-la-profondeur-sur-les-différents-plans">Visualiser la profondeur sur les différents plans</a></li>
  <li><a href="#visualiser-les-types-de-sol" id="toc-visualiser-les-types-de-sol" class="nav-link" data-scroll-target="#visualiser-les-types-de-sol">visualiser les types de sol</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Eléments de correction pour le TD1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Groupes de TD du 15/11 </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">comment =</span> <span class="cn">NA</span>, </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">cache =</span> <span class="cn">TRUE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">eval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">fig.align =</span> <span class="st">"center"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="présentation-de-quarto" class="level1">
<h1>Présentation de Quarto</h1>
<p>Quarto permet de faire des rapports intégrant du code R, des sorties exécutées à partir de ce code et du texte présentant les analyses.</p>
<p>Ce document est rédigé avec quarto, le fichier source est disponible sur <a href="https://raw.githubusercontent.com/MarieEtienne/MAF/refs/heads/master/tp1_example.qmd">ce lien</a></p>
</section>
<section id="présentation-du-contexte" class="level1">
<h1>Présentation du contexte</h1>
<p>Les données portent sur des échantillons de sols en différents sites, à différentes profondeurs en forêt de Bornéo. Diférentes variables de composition sont renseignées pour chaque échantillon, ainsi que le type de sol et la profondeur (par classe de profondeur).</p>
<p>On souhaite visualiser les relations entre les variables et identifier une typologie des sols.</p>
<section id="description-des-données" class="level2">
<h2 class="anchored" data-anchor-id="description-des-données">Description des données</h2>
<section id="chargement-des-packages" class="level3">
<h3 class="anchored" data-anchor-id="chargement-des-packages">Chargement des packages</h3>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FactoMineR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Pour ajouter un chunk R CTL + Alt + i</p>
</section>
<section id="importation-des-données" class="level3">
<h3 class="anchored" data-anchor-id="importation-des-données">Importation des données</h3>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dta <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">"https://marieetienne.github.io/datasets/donnees_sols.txt"</span>, <span class="at">sep =</span> <span class="st">";"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="description-des-données-1" class="level3">
<h3 class="anchored" data-anchor-id="description-des-données-1">Description des données</h3>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># str(dta)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>dta <span class="ot">&lt;-</span> dta <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Sol =</span> <span class="fu">as.factor</span>(Sol),</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">Site =</span> <span class="fu">as.factor</span>(Site),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">Profondeur =</span> <span class="fu">factor</span>(Profondeur), <span class="fu">levels</span>(<span class="fu">c</span>(<span class="st">'Superficiel'</span>, <span class="st">'Intermediaire'</span>, <span class="st">'Profond'</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Profondeur =</span> <span class="fu">relevel</span>(Profondeur, <span class="at">ref=</span> <span class="st">"Superficiel"</span>))</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">summary</span>(dta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       Sol            Site             Profondeur        pH       
 Alluvial:180   292-11_A:  3   Superficiel  :179   Min.   :3.400  
 Dunaire :180   292-11_B:  3   Intermediaire:180   1st Qu.:4.400  
 Grès    :179   292-11_H:  3   Profond      :180   Median :4.670  
                292-11_M:  3                       Mean   :4.632  
                292-11_N:  3                       3rd Qu.:4.880  
                292-11_O:  3                       Max.   :5.700  
                (Other) :521                                      
      Eau             Av.P              C                N          
 Min.   :0.170   Min.   : 0.380   Min.   :0.1400   Min.   :0.01000  
 1st Qu.:1.540   1st Qu.: 1.940   1st Qu.:0.5200   1st Qu.:0.05000  
 Median :2.490   Median : 3.160   Median :0.8000   Median :0.07000  
 Mean   :2.698   Mean   : 4.132   Mean   :0.9706   Mean   :0.08056  
 3rd Qu.:3.740   3rd Qu.: 5.235   3rd Qu.:1.2800   3rd Qu.:0.10000  
 Max.   :8.110   Max.   :51.290   Max.   :5.5900   Max.   :0.31000  
                                                                    
      NO3              NH4             Exc.Ac           Exc.Al     
 Min.   : 0.000   Min.   : 0.000   Min.   : 0.250   Min.   :0.030  
 1st Qu.: 0.400   1st Qu.: 1.655   1st Qu.: 1.990   1st Qu.:1.370  
 Median : 1.510   Median : 3.190   Median : 3.420   Median :2.720  
 Mean   : 2.722   Mean   : 5.044   Mean   : 3.781   Mean   :3.151  
 3rd Qu.: 2.965   3rd Qu.: 6.920   3rd Qu.: 5.205   3rd Qu.:4.475  
 Max.   :23.600   Max.   :40.430   Max.   :10.570   Max.   :9.720  
                                                                   
     Exc.Ca            Exc.Mg           Exc.K            Exc.Na       
 Min.   : 0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.00000  
 1st Qu.: 0.0400   1st Qu.:0.0700   1st Qu.:0.0500   1st Qu.:0.03000  
 Median : 0.0800   Median :0.2100   Median :0.1100   Median :0.05000  
 Mean   : 0.3029   Mean   :0.6194   Mean   :0.1386   Mean   :0.05237  
 3rd Qu.: 0.1900   3rd Qu.:0.8200   3rd Qu.:0.1700   3rd Qu.:0.07000  
 Max.   :13.4900   Max.   :5.3300   Max.   :1.3000   Max.   :0.27000  
                                                                      
  Exc.Cations        SatBase          Argile          Limon      
 Min.   : 0.380   Min.   : 1.80   Min.   : 8.00   Min.   : 0.00  
 1st Qu.: 2.405   1st Qu.: 7.95   1st Qu.:16.00   1st Qu.:10.00  
 Median : 4.030   Median :13.24   Median :21.00   Median :13.00  
 Mean   : 4.895   Mean   :18.51   Mean   :23.76   Mean   :16.13  
 3rd Qu.: 6.765   3rd Qu.:24.67   3rd Qu.:32.00   3rd Qu.:21.50  
 Max.   :17.300   Max.   :97.54   Max.   :53.00   Max.   :47.00  
                                                                 
     Sable     
 Min.   :15.0  
 1st Qu.:47.0  
 Median :67.0  
 Mean   :60.1  
 3rd Qu.:74.0  
 Max.   :87.0  
               </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>nobs <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dta)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ncol</span>(dta)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(<span class="fu">is.na</span>(dta))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dta<span class="sc">$</span>Profondeur)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  Superficiel Intermediaire       Profond 
          179           180           180 </code></pre>
</div>
</div>
<p>Le fichier de données a 539 lignes et 21colonnes.</p>
<p>il n’y a pas de données manquantes</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dta <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x=</span> Profondeur, <span class="at">y =</span> Argile) <span class="sc">+</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Classe de Profondeur'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="tp1_example_files/figure-html/boxplot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(dta<span class="sc">$</span>Argile<span class="sc">~</span> dta<span class="sc">$</span>Profondeur)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="tp1_example_files/figure-html/boxplot-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La somme des variables Limon, Argile et Sable devrait sommer à 100, mais ce n’est pas le cas à cause des erreurs d’arrondi</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dta <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> Limon <span class="sc">+</span> Argile <span class="sc">+</span> Sable)  <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Total)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    Total
1     100
2     100
3      99
4     100
5     100
6     100
7     100
8     100
9     100
10    100
11    100
12    101
13    100
14    100
15    100
16    100
17    100
18    100
19    100
20     99
21    100
22     99
23    100
24    100
25    100
26     99
27    100
28     99
29    100
30    101
31    100
32    100
33    100
34    100
35    100
36     99
37    100
38    100
39    100
40    100
41    101
42    100
43    101
44    100
45    101
46    100
47    100
48    100
49    100
50    100
51    100
52    100
53    100
54     99
55    100
56    101
57    100
58    101
59    101
60    100
61    101
62    101
63    101
64    101
65    100
66     99
67    100
68    100
69    101
70    100
71    100
72    100
73    100
74    100
75    100
76    100
77    100
78    100
79    100
80    100
81    100
82    100
83    101
84     99
85    101
86    100
87    100
88    100
89    101
90    100
91    101
92     99
93    100
94    100
95    100
96    100
97    100
98    100
99    100
100   100
101   100
102   100
103    99
104   100
105    99
106   100
107    99
108   100
109    99
110   100
111    99
112   100
113   100
114   100
115   100
116   100
117   100
118   100
119    99
120   100
121   100
122   100
123   100
124    99
125    99
126   100
127   100
128   100
129    99
130   101
131    99
132   100
133   100
134   100
135   100
136    99
137   100
138   100
139   101
140   100
141   100
142    99
143   100
144    99
145   101
146    99
147   100
148   100
149   100
150    99
151   100
152    99
153   100
154   100
155   100
156   100
157   100
158   100
159    99
160   100
161    99
162   100
163   101
164   100
165   100
166    99
167   100
168   101
169   100
170   101
171   100
172    99
173   100
174   101
175   100
176   101
177   100
178   100
179   100
180   100
181   100
182   100
183   100
184    99
185   100
186   100
187   100
188   100
189   100
190    99
191   100
192   101
193   100
194   101
195    99
196   100
197    99
198   100
199   101
200   100
201   100
202    99
203   100
204   100
205    99
206   100
207   101
208   100
209   101
210   100
211   100
212   100
213    99
214   100
215    99
216   100
217   100
218   100
219   100
220   100
221   100
222   100
223   100
224   100
225   100
226   100
227   100
228   100
229   101
230   100
231   100
232   100
233   100
234   100
235   100
236   100
237   100
238   100
239   100
240   100
241   100
242   100
243   101
244   100
245   101
246   100
247   100
248   100
249   100
250   100
251   100
252   100
253   100
254   100
255   100
256   100
257   100
258   100
259   100
260   100
261    99
262   100
263    99
264   100
265   100
266   100
267    99
268   100
269    99
270   100
271   100
272   100
273   100
274   100
275   100
276   100
277    99
278   100
279   100
280   100
281   100
282   100
283   100
284   100
285   100
286    99
287   100
288   100
289   100
290   100
291    99
292   100
293    99
294   101
295   100
296   101
297   100
298   100
299   100
300   101
301   100
302   101
303   100
304   100
305   100
306   100
307   101
308   100
309   100
310   100
311   100
312   100
313   101
314   100
315   101
316   100
317   101
318   100
319   100
320   100
321   100
322   100
323   100
324   100
325   100
326   100
327   100
328   100
329   100
330   100
331   100
332   100
333    99
334   100
335    99
336   100
337   101
338   100
339   100
340   100
341   100
342   100
343   100
344   100
345   100
346   100
347   100
348   100
349   100
350   100
351   101
352   100
353   101
354   100
355   100
356   100
357   100
358   100
359   100
360   100
361   100
362   100
363   100
364   101
365   100
366   100
367   101
368   100
369   100
370   100
371   100
372    99
373   100
374    99
375   100
376   100
377   100
378   101
379   100
380   101
381   100
382   100
383   100
384    99
385    99
386    99
387   100
388   100
389   100
390   100
391   100
392   100
393   100
394   100
395   100
396   100
397   100
398   100
399   100
400   100
401   100
402   100
403   100
404   100
405   100
406   100
407   100
408    99
409   100
410    99
411   100
412    99
413   100
414   100
415   100
416   100
417   100
418   101
419   100
420   100
421   100
422   100
423   100
424   100
425   100
426   100
427   100
428   100
429   100
430   100
431   100
432   100
433   100
434   100
435   100
436   100
437   100
438   100
439   100
440   100
441   100
442   100
443   100
444   100
445   101
446   100
447   100
448   100
449   100
450   101
451   100
452   101
453    99
454   100
455    99
456   100
457   100
458   100
459   101
460   100
461   101
462   100
463   100
464   100
465   101
466   100
467   101
468   100
469   100
470   100
471   100
472   100
473   100
474   101
475   100
476   101
477   100
478   101
479   100
480   100
481   100
482   100
483   100
484   100
485   100
486   100
487   100
488   100
489    99
490    99
491    99
492   100
493   101
494   100
495    99
496   100
497    99
498   100
499   100
500   100
501   100
502   100
503   100
504   100
505   100
506   100
507   100
508   101
509   100
510   100
511   100
512   100
513    99
514   101
515    99
516   100
517   101
518   100
519   100
520   100
521   100
522    99
523   100
524    99
525   100
526   100
527   100
528   100
529   101
530   100
531   101
532   100
533   101
534   100
535   100
536   100
537    99
538   100
539    99</code></pre>
</div>
</div>
<p>On peut s’interesser aux corrélations entre les variables</p>
</section>
<section id="représentation" class="level3">
<h3 class="anchored" data-anchor-id="représentation">Représentation</h3>
</section>
</section>
<section id="identifier-une-typologie-de-sol" class="level2">
<h2 class="anchored" data-anchor-id="identifier-une-typologie-de-sol">Identifier une typologie de sol</h2>
<p>Pour visualiser les données on peut commencer par une ACP</p>
<ul>
<li>sur les variables quantitatives uniquement</li>
</ul>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> dta <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> <span class="fu">as.matrix</span>()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(X)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 539  18</code></pre>
</div>
</div>
<section id="poids-des-individus" class="level3">
<h3 class="anchored" data-anchor-id="poids-des-individus">Poids des individus</h3>
<p>On va prendre les mêmes poids pour tous les individus soit <span class="math inline">\(1/n\)</span>.</p>
<p>Les poids sont stockés dans la matrice <span class="math inline">\(W\)</span></p>
</section>
<section id="distance-à-utiliser-entre-les-individus" class="level3">
<h3 class="anchored" data-anchor-id="distance-à-utiliser-entre-les-individus">Distance à utiliser entre les individus</h3>
<p>On commence par une distance euclidienne. La matrice de distance <span class="math inline">\(M\)</span> est l’identité</p>
<p>Le cours dit</p>
<ul>
<li><p>l’inertie vaut <span class="math inline">\(tr(X^\top W X M)\)</span></p></li>
<li><p>On va chercher les valeurs et vecteurs propres de la matrice <span class="math inline">\(X^\top W X M\)</span></p></li>
</ul>
<p>Si on fait une ACP non normée le sable et SatBase contribuent beaucoup plus à la formation des axes que les autres variables.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dta_pca <span class="ot">&lt;-</span> <span class="fu">PCA</span>(<span class="at">X =</span> dta, <span class="at">scale.unit =</span> <span class="cn">FALSE</span>, <span class="at">quali.sup =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">ncp =</span> <span class="dv">18</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#library(Factoshiny)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Pour rééquilibrer le poids des variables dans la construction des projections, on propose une ACP normée.</p>
<p>Pour voir comment l’information d’une variable se disperse sur les différentes dimensions on peut regarder la contribution de cette variable à la construction des différents axes.</p>
<p>Par exemple pour le PH</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(dta_pca<span class="sc">$</span>var<span class="sc">$</span>contrib[<span class="dv">1</span>,],<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> Dim.1  Dim.2  Dim.3  Dim.4  Dim.5  Dim.6  Dim.7  Dim.8  Dim.9 Dim.10 Dim.11 
  0.00   0.00   0.02   0.00   0.21   0.25   0.91   0.11   1.13   2.78  26.47 
Dim.12 Dim.13 Dim.14 Dim.15 Dim.16 Dim.17 Dim.18 
  0.31  57.55  10.24   0.02   0.00   0.00   0.00 </code></pre>
</div>
</div>
<p>On peut mettre en place une ACP normée en précisant simple <code>scale.unit = TRUE</code>, ce qui est le comportement par défaut de la fonction `PC̀A ̀.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dta_pca <span class="ot">&lt;-</span> <span class="fu">PCA</span>(<span class="at">X =</span> dta, <span class="at">scale.unit =</span> <span class="cn">TRUE</span>, <span class="at">quali.sup =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">ncp =</span> <span class="dv">18</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#library(Factoshiny)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Qualité globale des représentations</p>
<ul>
<li><p>sur le plan 1-2 : on représente 66.9241274</p></li>
<li><p>sur le plan 1-3 : on représente 57.5578374</p></li>
</ul>
<p>Avec 3 axes on représente 77.1397764 de l’inertie.</p>
<p>On peut visualiser le cercle des corrélations</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.PCA</span>(dta_pca,<span class="at">choix=</span><span class="st">'var'</span>,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">select=</span><span class="st">'cos2  0.7'</span>,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">unselect=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="tp1_example_files/figure-html/visu_var-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>A l’aide des contributions des différentes variables à la définition des axes, on peut comprendre l’information résumée par ces axes.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>dta_pca<span class="sc">$</span>var<span class="sc">$</span>contrib <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="sc">-</span>Dim<span class="fl">.1</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(Dim<span class="fl">.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                 Dim.1
Exc.Cations 10.7948976
Eau         10.2869537
Sable        8.9320337
Argile       8.3692915
Exc.Mg       8.0680012
N            7.6257192
Limon        7.2482479
Exc.Ac       6.6410790
Exc.K        6.5019985
Exc.Al       6.3103633
NO3          4.8972792
Exc.Na       4.0962613
SatBase      3.6327958
Exc.Ca       2.8569555
C            1.4042632
pH           1.2715181
Av.P         0.6866580
NH4          0.3756832</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dta_pca<span class="sc">$</span>var<span class="sc">$</span>contrib <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="sc">-</span>Dim<span class="fl">.2</span>)<span class="sc">|&gt;</span> <span class="fu">select</span>(Dim<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                 Dim.2
Av.P        18.3416002
C           17.2698714
Exc.Al       9.8791351
SatBase      9.3284152
Exc.Ac       7.1350777
Argile       5.6487034
Exc.K        5.5144861
Sable        5.1690662
N            4.9797246
pH           4.5458035
Exc.Ca       3.4929128
Limon        3.3331633
Exc.Na       1.8388125
Exc.Cations  1.0983771
NO3          0.8067869
Eau          0.5672494
NH4          0.5379330
Exc.Mg       0.5128816</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>dta_pca<span class="sc">$</span>var<span class="sc">$</span>contrib <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="sc">-</span>Dim<span class="fl">.4</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(Dim<span class="fl">.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                  Dim.4
NH4         83.32422550
Av.P         5.07745293
Exc.Ca       4.76531991
pH           3.47674191
Exc.K        1.04204242
Exc.Ac       0.54618975
NO3          0.49368347
Limon        0.22554066
Eau          0.22252392
Exc.Al       0.22067882
C            0.20730224
N            0.19798282
SatBase      0.10528835
Exc.Mg       0.03464235
Sable        0.02775744
Exc.Cations  0.01430037
Argile       0.01058951
Exc.Na       0.00773764</code></pre>
</div>
</div>
<p>La description des axes * l’axe 1 parle de l’eau, des cations, du sable et de l’argile (et du limon) * l’axe 2 du phosphate et du carbone * petite remarque sur l’axe 4 qui est essentiellemnt NH4</p>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>dta_pca<span class="sc">$</span>var<span class="sc">$</span>contrib <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="sc">-</span>Dim<span class="fl">.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                 Dim.1      Dim.2       Dim.3       Dim.4        Dim.5
Exc.Cations 10.7948976  1.0983771  0.03480337  0.01430037 4.188057e-01
Eau         10.2869537  0.5672494  1.31525251  0.22252392 1.241612e-03
Sable        8.9320337  5.1690662  1.34016866  0.02775744 1.475239e-01
Argile       8.3692915  5.6487034  0.66996148  0.01058951 1.847004e-04
Exc.Mg       8.0680012  0.5128816  4.45586244  0.03464235 8.364634e+00
N            7.6257192  4.9797246  0.01069421  0.19798282 9.445310e+00
Limon        7.2482479  3.3331633  2.05875433  0.22554066 7.133881e-01
Exc.Ac       6.6410790  7.1350777  8.16655281  0.54618975 4.761044e-02
Exc.K        6.5019985  5.5144861  0.32713861  1.04204242 7.144207e+00
Exc.Al       6.3103633  9.8791351  4.68272487  0.22067882 1.511215e-01
NO3          4.8972792  0.8067869  4.89089787  0.49368347 3.091713e+01
Exc.Na       4.0962613  1.8388125  8.24800274  0.00773764 2.455226e+01
SatBase      3.6327958  9.3284152 11.55924831  0.10528835 6.504494e+00
Exc.Ca       2.8569555  3.4929128 20.07792776  4.76531991 4.503104e-01
C            1.4042632 17.2698714  3.73651595  0.20730224 4.190173e+00
pH           1.2715181  4.5458035 21.62566216  3.47674191 6.850679e+00
Av.P         0.6866580 18.3416002  1.63149855  5.07745293 5.566443e-02
NH4          0.3756832  0.5379330  5.16833338 83.32422550 4.526169e-02
                  Dim.6        Dim.7        Dim.8       Dim.9      Dim.10
Exc.Cations  2.48494588 2.638659e-02 1.717896e-02  3.46887901  0.81909567
Eau          1.51858452 1.697208e+00 2.648458e+00  0.54809897  0.05804883
Sable        0.33697321 5.287402e-04 4.659028e-02  4.05712341  1.02529020
Argile       0.04353745 3.812684e-01 1.129776e-02  7.22184556  0.87015577
Exc.Mg       4.25793987 3.735044e+00 1.127911e+01  0.63724057 12.11220034
N            0.65672497 5.566787e+00 6.368322e+00  0.89720121  4.15863023
Limon        0.83311347 6.416099e-01 1.053778e-01 57.82600449 10.98536861
Exc.Ac       0.18507327 2.356086e-01 1.488297e-02  2.57408705  0.54611503
Exc.K        5.01659624 7.486751e+00 1.469425e+00  2.64378882  2.72585996
Exc.Al       0.02060726 1.597977e-01 5.753269e-04  2.56353316  0.21734094
NO3         27.46088797 5.130396e+00 3.428301e-01  2.00631146 12.53278132
Exc.Na       7.15656695 2.682374e+01 1.837668e+01  1.37994935  5.84463872
SatBase      0.89194522 1.251606e+00 9.536667e+00  0.29851968  2.85607098
Exc.Ca       7.45715705 1.482961e+01 6.664628e+00  9.27175715 20.94267392
C           10.61725847 6.385827e+00 1.311118e+01  3.66149337  1.35319338
pH          11.22388389 2.112981e+01 2.328795e+01  0.03387108  0.27866698
Av.P        16.00085911 4.473410e+00 8.920512e-01  0.70452160 22.42340546
NH4          3.83734520 4.460218e-02 5.826795e+00  0.20577409  0.25046365
                  Dim.11       Dim.12       Dim.13      Dim.14      Dim.15
Exc.Cations  0.475351285  6.790340716 4.689912e-04  4.19063317  0.38072817
Eau          1.030075448  2.669876322 8.381966e-01 66.57685395  9.89523952
Sable        0.001653793 10.720691455 1.904331e+00  0.22389600  2.23094321
Argile       0.620111480 40.350300972 6.603893e+00  0.86902584  6.36143392
Exc.Mg       1.952950466 11.389774790 2.535660e+01  1.31465142  0.47047378
N            0.011537034  7.881749297 6.640709e-01 13.14907175 37.96982697
Limon        0.713985584  0.935792111 4.431672e-02  0.01823522  0.01585300
Exc.Ac       1.245609966  3.762674392 6.177288e+00  4.18254684  1.59099171
Exc.K       59.705766646  0.002482866 2.518258e-01  0.01370607  0.04066413
Exc.Al       0.653348920  1.472006310 6.624515e+00  6.61560972  0.14611545
NO3          0.382084218  7.263458776 1.678187e-02  0.87045319  1.95128298
Exc.Na       0.203088210  0.104957676 9.538177e-01  0.29523508  0.09727814
SatBase      4.210287564  3.441187546 4.495045e+01  0.29848568  1.13056013
Exc.Ca       0.437616155  0.745454395 1.234203e+00  0.70536231  0.10403308
C            0.005393352  0.363276426 4.330111e-03  0.17196912 36.76815480
pH           1.318673838  1.987303729 1.761950e+00  0.42029513  0.70634400
Av.P        26.896860661  0.068062495 2.554336e+00  0.06118856  0.04188870
NH4          0.135605378  0.050609727 5.862521e-02  0.02278094  0.09818830
                  Dim.16       Dim.17       Dim.18
Exc.Cations  9.561988769 2.326666e-03 5.942049e+01
Eau          0.126115816 8.562839e-06 1.501108e-05
Sable        0.081242444 6.375406e+01 1.220896e-04
Argile       0.040458768 2.192791e+01 2.731744e-05
Exc.Mg       1.137262735 6.966794e-04 4.920035e+00
N            0.415523180 1.120508e-03 3.939651e-06
Limon        0.001099745 1.430012e+01 2.721474e-05
Exc.Ac      26.458425159 3.746262e-03 3.048644e+01
Exc.K        0.008574133 3.151276e-04 1.043719e-01
Exc.Al      60.275930843 6.586284e-03 9.523289e-06
NO3          0.036851528 9.848034e-05 8.950844e-07
Exc.Na       0.013736881 1.187195e-04 7.115574e-03
SatBase      0.003903661 6.784058e-05 9.750597e-06
Exc.Ca       0.902323662 4.275538e-04 5.061325e+00
C            0.747672338 2.121981e-03 5.206150e-08
pH           0.080776017 6.806645e-05 1.052186e-07
Av.P         0.090348837 1.920379e-04 1.558006e-06
NH4          0.017765483 5.781532e-06 2.779483e-06</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>dta_pca<span class="sc">$</span>var<span class="sc">$</span>contrib <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="sc">-</span>Dim<span class="fl">.2</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(Dim<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                 Dim.2
Av.P        18.3416002
C           17.2698714
Exc.Al       9.8791351
SatBase      9.3284152
Exc.Ac       7.1350777
Argile       5.6487034
Exc.K        5.5144861
Sable        5.1690662
N            4.9797246
pH           4.5458035
Exc.Ca       3.4929128
Limon        3.3331633
Exc.Na       1.8388125
Exc.Cations  1.0983771
NO3          0.8067869
Eau          0.5672494
NH4          0.5379330
Exc.Mg       0.5128816</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="visualiser-la-profondeur-sur-les-différents-plans" class="level1">
<h1>Visualiser la profondeur sur les différents plans</h1>
</section>
<section id="visualiser-les-types-de-sol" class="level1">
<h1>visualiser les types de sol</h1>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.PCA</span>(dta_pca, <span class="at">axes=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>),<span class="at">invisible=</span><span class="fu">c</span>(<span class="st">'quali'</span>,<span class="st">'ind.sup'</span>),<span class="at">habillage=</span><span class="dv">1</span>,<span class="at">label =</span><span class="st">'none'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="tp1_example_files/figure-html/type_sol-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot.PCA</span>(dta_pca,<span class="at">choix=</span><span class="st">'var'</span>,</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">select=</span><span class="st">'cos2  0.7'</span>, <span class="do">##&nbsp;pour représenter seulement les variables dont le cos2 &gt; 0.7</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">unselect=</span><span class="dv">0</span>, <span class="at">axes =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="tp1_example_files/figure-html/type_sol-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>il fallait chercher l’axe 4 pour bien illustrer les différences entre grès et dunaire, l’axe 4 est presque exclusivement l’information sur le NH4.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>